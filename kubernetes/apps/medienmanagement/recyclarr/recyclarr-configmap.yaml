apiVersion: v1
kind: ConfigMap
metadata:
  name: recyclarr-configmap
  namespace: medienmanagement
data:
  recyclarr.yml: |
    # Recyclarr config for Sonarr/Radarr.
    # This file must match Recyclarr's schema. The previous version mixed sample snippets
    # and invalid indentation, which can prevent `recyclarr sync` from running.

    sonarr:
      sonarr:
        base_url: http://sonarr.medienmanagement.svc.cluster.local:8989
        api_key: !env_var SONARR__AUTH__APIKEY
        delete_old_custom_formats: true
        replace_existing_custom_formats: true

        # German-first templates (TRaSH Guides)
        include:
          - template: sonarr-quality-definition-series
          - template: sonarr-v4-quality-profile-hd-bluray-web-german
          - template: sonarr-v4-custom-formats-hd-bluray-web-german
          - template: sonarr-v4-quality-profile-hd-remux-web-german
          - template: sonarr-v4-custom-formats-hd-remux-web-german

        # If you want to be MUCH stricter about German (can block upgrades if no German release exists):
        # quality_profiles:
        #   - name: HD Bluray + WEB (GER)
        #     min_format_score: 10000
        #   - name: HD Remux + WEB (GER)
        #     min_format_score: 10000

        # Optional extra overrides (uncomment what you really want):
        # custom_formats:
        #   - trash_ids:
        #       - 47435ece6b99a0b477caf360e79ba0bb # Block all x265 HD releases
        #     assign_scores_to:
        #       - name: HD Bluray + WEB (GER)
        #         score: -35000
        #       - name: HD Remux + WEB (GER)
        #         score: -35000

    radarr:
      radarr:
        base_url: http://radarr.medienmanagement.svc.cluster.local:7878
        api_key: !env_var RADARR__AUTH__APIKEY
        delete_old_custom_formats: true
        replace_existing_custom_formats: true

        # German-first templates (TRaSH Guides)
        include:
          - template: radarr-quality-definition-movie
          - template: radarr-quality-profile-hd-bluray-web-german
          - template: radarr-custom-formats-hd-bluray-web-german

        # If you want to strongly avoid non-German releases (can block movies with no German option):
        # quality_profiles:
        #   - name: HD Bluray + WEB (GER)
        #     min_format_score: 10000

        # Optional extra overrides (uncomment what you really want):
        # custom_formats:
        #   - trash_ids:
        #       - dc98083864ea246d05a42df0d05f81cc # Block all x265 HD releases
        #     assign_scores_to:
        #       - name: HD Bluray + WEB (GER)
        #         score: -35000